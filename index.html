<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Toxic Death</title>
  <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">

  <style>
    /* ---------- ØªØµÙ…ÙŠÙ…Ùƒ Ø§Ù„Ø£ØµÙ„ÙŠ ---------- */
    body {
      font-family: 'Arial', sans-serif;
      background-color: #000;
      color: #ff0000;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    .top-bar {
      width: 100%;
      background-color: #111;
      padding: 10px 0;
      text-align: center;
      font-size: 1.1em;
      color: #aaa;
      letter-spacing: 1px;
      border-bottom: 1px solid #222;
    }
    .header {
      font-family: 'Creepster', cursive;
      font-size: 3.5em;
      margin: 20px 0;
      color: #ff0000;
      text-shadow: 0 0 10px #ff0000;
    }
    .slideshow-container {
      max-width: 800px;
      margin-bottom: 20px;
      position: relative;
    }
    .mySlides {
      display: none;
    }
    .slideshow-container img {
      width: 100%;
      border: 2px solid #333;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
    }
    .music-button {
      background: #111;
      color: #ff0000;
      border: 2px solid #ff0000;
      padding: 12px 25px;
      font-size: 1em;
      border-radius: 50px;
      cursor: pointer;
      margin-bottom: 10px;
      transition: all 0.3s ease;
    }
    .music-button:hover {
      background: #ff0000;
      color: #000;
    }
    audio { display: none; }
    .volume-container {
      margin-top: 5px;
      width: 200px;
    }
    .volume-bar-container {
      width: 100%;
      height: 10px;
      background: #333;
      border-radius: 5px;
      overflow: hidden;
      cursor: pointer;
      position: relative;
    }
    .volume-bar {
      height: 100%;
      background: #ff0000;
      transition: width 0.1s;
      position: absolute;
      top: 0;
      left: 0;
    }
    .footer {
      font-size: 1.1em;
      color: #888;
      text-align: center;
      margin-top: auto;
      margin-bottom: 15px;
    }
    .footer a {
      color: #ff0000;
      text-decoration: none;
    }
    .footer a:hover { text-decoration: underline; }

    /* ØµÙ†Ø¯ÙˆÙ‚ Ø¨ÙŠØ§Ù†Ø§Øª IP */
    #ip-info {
      margin: 15px;
      white-space: pre-wrap;
      background: rgba(255,0,0,0.05);
      border: 1px solid #ff0000;
      border-radius: 10px;
      padding: 10px;
      max-width: 600px;
      color: #ff8080;
      font-family: monospace;
      font-size: 0.9em;
      text-align: left;
    }

    /* ---------- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± (Ø«Ø§Ø¨Øª Ø£Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†) ---------- */
    #visitor-counter {
      position: fixed;
      top: 15px;
      right: 15px;
      background: rgba(0,0,0,0.6);
      color: #ff0000;
      border: 1px solid #ff0000;
      padding: 6px 12px;
      border-radius: 12px;
      font-family: monospace;
      font-size: 15px;
      z-index: 99999;
      box-shadow: 0 0 12px rgba(255,0,0,0.25);
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }
    #visitor-counter .eye {
      font-size: 16px;
    }

    /* Ø¥Ø°Ø§ Ø­Ø¨Ù‘ÙŠØª Ù†Øµ Ø£Ø¨ÙŠØ¶ Ø¨Ø¯Ù„ Ø£Ø­Ù…Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ© */
    /* #visitor-counter { color: #fff; border-color: rgba(255,0,0,0.9); } */

    /* ØµØºÙŠØ±Ø© Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (max-width: 480px) {
      #visitor-counter { font-size: 13px; padding: 5px 10px; top: 10px; right: 8px; }
      .header { font-size: 2.5em; }
    }
  </style>
</head>
<body>

  <div class="top-bar">Toxic Death &amp; NAIF &amp; DeathRow &lt;3</div>
  <div class="header">Toxic Death</div>

  <button class="music-button" onclick="toggleMusic()">ØªØ´ØºÙŠÙ„ / Ø¥ÙŠÙ‚Ø§Ù</button>

  <div class="volume-container">
    <div id="volume-level" style="color: #ff0000; font-size: 1.1em; margin-bottom: 5px;">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª: 56%</div>
    <div id="volume-bar-container" class="volume-bar-container" onclick="setVolumeFromClick(event)">
      <div id="volume-bar" class="volume-bar" style="width: 56%;"></div>
    </div>
  </div>

  <audio id="bg-music" autoplay loop>
    <source src="death_theme.mp3" type="audio/mpeg">
  </audio>

  <div class="slideshow-container" aria-hidden="true">
    <div class="mySlides fade"><img src="1.gif" alt="GIF 1"></div>
    <div class="mySlides fade"><img src="2.gif" alt="GIF 2"></div>
    <div class="mySlides fade"><img src="3.gif" alt="GIF 3"></div>
    <div class="mySlides fade"><img src="4.gif" alt="GIF 4"></div>
    <div class="mySlides fade"><img src="5.gif" alt="GIF 5"></div>
    <div class="mySlides fade"><img src="6.gif" alt="GIF 6"></div>
    <div class="mySlides fade"><img src="7.gif" alt="GIF 7"></div>
    <div class="mySlides fade"><img src="8.gif" alt="GIF 8"></div>
    <div class="mySlides fade"><img src="9.gif" alt="GIF 9"></div>
    <div class="mySlides fade"><img src="10.gif" alt="GIF 10"></div>
    <div class="mySlides fade"><img src="11.gif" alt="GIF 11"></div>
    <div class="mySlides fade"><img src="12.gif" alt="GIF 12"></div>
    <div class="mySlides fade"><img src="13.gif" alt="GIF 13"></div>
    <div class="mySlides fade"><img src="14.gif" alt="GIF 14"></div>
    <div class="mySlides fade"><img src="15.gif" alt="GIF 15"></div>
    <div class="mySlides fade"><img src="16.gif" alt="GIF 16"></div>
    <div class="mySlides fade"><img src="17.gif" alt="GIF 17"></div>
    <div class="mySlides fade"><img src="18.gif" alt="GIF 18"></div>
    <div class="mySlides fade"><img src="19.gif" alt="GIF 19"></div>
    <div class="mySlides fade"><img src="20.gif" alt="GIF 20"></div>
    <div class="mySlides fade"><img src="21.gif" alt="GIF 21"></div>
  </div>

  <!-- Ù‡Ù†Ø§ Ù†Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª IP -->
  <div id="ip-info">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø±...</div>

  <div class="footer">
    <strong>My account</strong><br>
    <a href="https://discord.gg/BWzWJpDy6t" target="_blank">Discord.gg/BWzWJpDy6t</a><br><br>
    Toxic Death &amp; NAIF &amp; DeathRow &lt;3<br>
    <a href="https://discord.gg/" target="_blank">Discord.gg/</a>
  </div>

  <!-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± Ø«Ø§Ø¨Øª Ø£Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† -->
  <div id="visitor-counter"><span class="eye">ğŸ‘</span> <span id="view-count">Loading...</span></div>

<script>
/*
  Ø¯Ù…Ø¬ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª: Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ - ØµÙˆØª - Ù…Ø­Ø§ÙˆÙ„Ø§Øª fetch Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
  Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©: Ø¨Ø¹Ø¶ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù€ fetch (ipinfo, countapi) Ù‚Ø¯ Ù„Ø§ ØªØ¹Ù…Ù„ Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¹Ø¨Ø± file://
  Ù„Ø°Ù„Ùƒ Ø¬ÙØ±Ù‘ÙØ¨ Ø¨Ø¹Ø¯ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø¥Ù„Ù‰ GitHub Pages Ø£Ùˆ Ø§Ø³ØªØ¶Ø§ÙØ© HTTPS.
*/

(function(){
  // ---------- Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ ----------
  let slideIndex = 0;
  function showSlides() {
    const slides = document.getElementsByClassName("mySlides");
    if (!slides || slides.length === 0) return;
    for (let i = 0; i < slides.length; i++) slides[i].style.display = "none";
    slideIndex++;
    if (slideIndex > slides.length) slideIndex = 1;
    slides[slideIndex - 1].style.display = "block";
    setTimeout(showSlides, 2000);
  }
  showSlides();

  // ---------- ØµÙˆØª ÙˆØªØ­ÙƒÙ… Ù…Ø³ØªÙˆÙ‰ ----------
  const music = document.getElementById("bg-music");
  function toggleMusic() {
    try { if (music.paused) music.play(); else music.pause(); } catch(e){}
  }
  function updateVolumeDisplay() {
    const volumeDisplay = document.getElementById("volume-level");
    const volumeBar = document.getElementById("volume-bar");
    const percent = Math.round((music.volume || 0.56) * 100);
    volumeDisplay.textContent = "Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª: " + percent + "%";
    if (volumeBar) volumeBar.style.width = percent + "%";
    try { localStorage.setItem("volume", music.volume); } catch(e){}
  }
  function setVolumeFromClick(event) {
    const container = document.getElementById("volume-bar-container");
    if (!container) return;
    const rect = container.getBoundingClientRect();
    const clickX = event.clientX - rect.left;
    const width = rect.width || 1;
    const newVolume = Math.min(1, Math.max(0, clickX / width));
    music.volume = newVolume;
    updateVolumeDisplay();
  }
  let isDragging = false;
  const vcontainer = document.getElementById("volume-bar-container");
  if (vcontainer) {
    vcontainer.addEventListener("mousedown", () => isDragging = true);
  }
  window.addEventListener("mouseup", () => isDragging = false);
  window.addEventListener("mousemove", (e) => { if (isDragging) setVolumeFromClick(e); });
  window.addEventListener("load", () => {
    try {
      const savedVolume = localStorage.getItem("volume");
      if (savedVolume !== null && music) music.volume = parseFloat(savedVolume);
    } catch(e){}
    updateVolumeDisplay();
    if (music) music.play().catch(() => {
      // Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª ØªÙ…Ù†Ø¹ autoplayØŒ Ù†Ø´ØºÙ‘Ù„Ù‡ Ø¨Ø¹Ø¯ Ø£ÙˆÙ„ Ù†Ù‚Ø±Ø©
      document.addEventListener("click", () => music.play(), { once: true });
    });
  });

  // ---------- Ù…Ù†Ø¹ ÙØ­Øµ Ø§Ù„ØµÙØ­Ø© Ùˆ ÙƒÙ„ÙŠÙƒ ÙŠÙ…ÙŠÙ† ----------
  document.onkeydown = function(e) {
    try {
      if (e.keyCode == 123) return false;
      if (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) return false;
      if (e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) return false;
      if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) return false;
      if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;
    } catch(e){}
  };
  document.addEventListener('contextmenu', function(e) { e.preventDefault(); });

  // ---------- IP + ipinfo + Ø¥Ø±Ø³Ø§Ù„ ÙˆÙŠØ¨ Ù‡ÙˆÙƒ + Ø¹Ø¯Ø§Ø¯ Ø²ÙˆØ§Ø± ----------
  const WEBHOOK = "https://canary.discord.com/api/webhooks/1406835678381215875/fvpexHZCIFXoEheK0iMv_dE9Bq9gt0hWuJnyv7hG4JrORkGoSMoqCalKEyagRdymQIJu";
  const COUNTAPI_KEY = "lfth3_visitors_counter"; // Ù…ÙØªØ§Ø­ Ø®Ø§Øµ Ø¨Ùƒ Ø¯Ø§Ø®Ù„ countapi (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  const COUNTAPI_NAMESPACE = "lfth3"; // Ù‡Ø°Ø§ ÙÙ‚Ø· Ù„Ù„ØªÙ…ÙŠÙŠØ² Ù„Ùˆ Ø­Ø¨ÙŠØª ØªØºÙŠØ±

  // helper: Ø¢Ù…Ø§Ù† Ø¹Ù†Ø¯ fetch
  async function safeFetch(url, opts) {
    try {
      const r = await fetch(url, opts);
      if (!r.ok) throw new Error("HTTP " + r.status);
      return r.json();
    } catch (err) {
      // console.warn("fetch failed:", url, err);
      return null;
    }
  }

  async function updateVisitorCount() {
    // Ù†Ø³ØªØ®Ø¯Ù… countapi.xyz (Ù…ÙØªÙˆØ­ ÙˆÙ…Ø¬Ø§Ù†ÙŠ)
    // key: lfth3/visitors  -> Ù„Ùˆ ØªØ­Ø¨ ØªØºÙŠÙ‘Ø± Ø§Ø³Ù… Ø§Ù„Ù…ÙØªØ§Ø­ ØºÙŠÙ‘Ø±Ù‡ Ù‡Ù†Ø§
    const url = "https://api.countapi.xyz/hit/lfth3/visits";
    const res = await safeFetch(url);
    if (res && (res.value !== undefined || res.value === 0)) {
      document.getElementById("view-count").textContent = res.value;
      return res.value;
    } else {
      // ÙØ´Ù„: Ø§Ø¹Ø±Ø¶ 0 Ø£Ùˆ "â€”"
      const el = document.getElementById("view-count");
      if (el) el.textContent = "â€”";
      return null;
    }
  }

  async function getVisitorInfo() {
    // Ù†Ø¬Ù„Ø¨ Ø§Ù„Ù€ IP Ø£ÙˆÙ„Ù‹Ø§
    const ipResp = await safeFetch("https://api64.ipify.org?format=json");
    const ip = ipResp && ipResp.ip ? ipResp.ip : "Unknown";

    // Ø«Ù… Ù†Ø·Ù„Ø¨ ip info (Ø¨Ù„Ø¯/Ù…Ø¯ÙŠÙ†Ø©)
    // Ù„Ø§Ø­Ø¸: ipinfo.io Ù‚Ø¯ ÙŠÙ‚ÙŠÙ‘Ø¯ Ø§Ù„Ù†Ø¯Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©ØŒ Ù„Ø°Ù„Ùƒ Ù†Ø³ØªØ®Ø¯Ù… ipapi.co ÙƒØ¨Ø¯ÙŠÙ„
    const info = (await safeFetch("https://ipapi.co/json/")) || {};
    info.ip = ip;
    return info;
  }

  async function sendWebhook(payload) {
    // Ù„Ø§ Ù†Ø¹Ø·Ù„ Ø§Ù„ØµÙØ­Ø© Ù„Ùˆ ÙØ´Ù„ Ø§Ù„ÙˆÙŠØ¨ Ù‡ÙˆÙƒ
    try {
      await fetch(WEBHOOK, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ content: payload })
      });
    } catch (e) { /* ignore */ }
  }

  // Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„ØªÙŠ ØªØ±Ø¨Ø· ÙƒÙ„ Ø´ÙŠØ¡
  async function runVisitorFlow() {
    const count = await updateVisitorCount(); // ÙŠØ­Ø¯Ø« Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙˆÙŠØ¹Ø±Ø¶
    const info = await getVisitorInfo();

    // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙÙŠ div ip-info
    try {
      const ipBox = document.getElementById("ip-info");
      ipBox.textContent = JSON.stringify(info, null, 2);
    } catch(e){}

    // Ù†Ø¨Ù†ÙŠ Ø±Ø³Ø§Ù„Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„ÙˆÙŠØ¨ Ù‡ÙˆÙƒ
    const chat = [
      "ğŸ§  New Visitor",
      `ğŸ‘ Total Views: ${count === null ? "?" : count}`,
      "",
      "```json",
      JSON.stringify({
        ip: info.ip || "Unknown",
        country: info.country_name || info.country || "Unknown",
        region: info.region || "Unknown",
        city: info.city || "Unknown",
        org: info.org || info.org_name || "Unknown",
        timezone: info.timezone || info.time_zone || "Unknown",
        ua: navigator.userAgent
      }, null, 2),
      "```"
    ].join("\n");

    await sendWebhook(chat);
  }

  // Ø´ØºÙ‘Ù„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© (load)
  if (document.readyState === "complete" || document.readyState === "interactive") {
    // already ready
    setTimeout(runVisitorFlow, 300);
  } else {
    window.addEventListener("load", () => setTimeout(runVisitorFlow, 300));
  }

})(); // Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù€ IIFE
</script>

</body>
</html>
